image:
  name: debian:bullseye

variables:
  RENODE_VERSION: latest
  ZEPHYR_SDK_VERSION: 0.15.2
  WEST_VERSION: 0.14.0
  DASHBOARD_URL: https://zephyr-dashboard.renode.io

Compare repls:
  artifacts:
    paths:
      - ci-output/repls
      - ci-output/robot-results
    when: always
  before_script:
    - ./ci/setup_env.sh
  script:
    # Get repl kit from dashboard
    - (cd ci-output && ../ci/get_dashboard_replkit.sh)

    # Print which dts2repl commits are being compared
    - OLD_COMMIT="$(<ci-output/dts2repl.version)"
    - echo "Dashboard repls were generated by dts2repl $OLD_COMMIT, commits since then are:"
    - git log --oneline --graph --color=always "$OLD_COMMIT..HEAD"

    # Run the pipeline proper
    - ./ci/entrypoint.sh
